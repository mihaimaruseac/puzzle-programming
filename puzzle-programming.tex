\documentclass{beamer}

\usepackage{color}			 % highlight
\usepackage{alltt}			 % highlight
\usepackage{code/highlight}	 % highlight

\usepackage{hyperref}
\mode<presentation>

\title{Puzzle Programming}
\author{Mihai Maruseac, ROSEdu\\mihai@rosedu.org}

\setbeamertemplate{frametitle continuation}[from second]
%\setbeamertemplate{footline}[frame number]
\setbeamercolor{postit}{fg=black,bg=example text.fg!75!black!10!bg}

\renewcommand\quote[3]{
  \begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{postit}
    #3
    \vskip5mm
    \hspace*\fill{\small{#1, \textit{#2}}}
  \end{beamercolorbox}
}

\pgfdeclareimage[height=3cm]{waterfall}{img/waterfall}
\pgfdeclareimage[height=5cm]{gdp}{img/gdp}

\begin{document}

\maketitle

\begin{frame}{A Small Problem}
  \quote{Rick Cook}{The Wizardry Compiled}{
    Programming today is a race between software engineers striving to build
    bigger and better idiot-proof programs, and the Universe trying to produce
    bigger and better idiots. So far, the Universe is winning.
  }
\end{frame}

\begin{frame}{One Solution}
  \quote{Murray Cantor}{-}{
    Software development may seem to have a lot in common with construction or
    engineering projects, such as building a bridge.
  }
  \pause
  \center{\pgfuseimage{waterfall}}
\end{frame}

\begin{frame}{An Extreme Solution}
  \quote{-}{Manifesto for Agile Software Development}{
    Individuals and interactions over processes and tools
    Working software over comprehensive documentation
    Customer collaboration over contract negotiation
    Responding to change over following a plan
  }
  \pause
  \quote{Anonymous}{-}{First do it, then do it right, then do it fast.}
\end{frame}

\begin{frame}{Test Driven-...}
  \begin{itemize}
    \item Development
    \item Design
    \item $\ldots$
  \end{itemize}
  \pause
  \begin{itemize}
    \item tests
    \item contracts
    \item asserts
  \end{itemize}
  \pause
  Defensive programming
\end{frame}

\begin{frame}{Guerilla Defensive Programming}
  \center{\pgfuseimage{gdp}}
\end{frame}

\begin{frame}{\textbf{Type} Driven Design}
  \quote{-}{-}{
    When writing code in a statically typed language sometimes types are
    considered as orthogonal to the logic of the code. We write them to
    appease the compiler, or get performance or IntelliSense \& navigation, but
    all of these has no relation to the code itself.

    This is wrong.
  }
  \pause
  In a nutshell:
  \begin{enumerate}[<+->]
    \item define types for entities in problem domain
    \item encode restrictions in type
    \item split the problem into subcomponents, based on types
    \item divide et impera
  \end{enumerate}
\end{frame}

\begin{frame}{Programming Languages from the POV of Types}
  \begin{itemize}
    \item typed: C, Haskell, Python, Ruby
    \item untyped: assembly, SKI, Brainf**k
    \pause
    \item weakly typed: Python, Ruby
    \item strongly typed: C, Java, Haskell
    \pause
    \item weak typing: JavaScript, C
    \item strong typing: Haskell
    \pause
    \item \textbf{type-safe}: all of the good parts of the above: Haskell, VHDL
    \pause
    \item manifestly typed: C, Java
    \item type inference: Haskell
  \end{itemize}
\end{frame}

\begin{frame}{What's in a Type?}
  \begin{itemize}[<+->]
    \item \textbf{syntactic} label associated with variable
    \item \textbf{value space} \textit{set} of values with \textit{same}
    properties
    \vskip1cm
    \item maximal set of values.
    \vskip1cm
    \item proper types: \texttt{Bool}, \texttt{Int}, \texttt{Integer}
    \item type variables: \texttt{a}, \texttt{t0}, \texttt{my\_type}
  \end{itemize}
\end{frame}

\begin{frame}{Some Types}
  \begin{description}[<+->]
    \item[\texttt{Int}] register sized integer
    \item[\texttt{Integer}] unlimited size integer
    \item[\texttt{a}] anything (type variable)
    \item[\texttt{[Int]}] list of register sized integers
    \item[\texttt{[a]}] list of anything (but same type: list of integers, list
    of pairs, $\ldots$)
    \item[\texttt{a $\rightarrow$ b}] function from values of type \texttt{a}
    to values of type \texttt{b}
    \item[\texttt{a $\rightarrow$ b $\rightarrow$ c}]
    \item[\texttt{a $\rightarrow$ (b $\rightarrow$ c)}]
    \item[\texttt{(a $\rightarrow$ b) $\rightarrow$ c}]
  \end{description}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus1.hs}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus2.hs}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus3.hs}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus4.hs}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus5.hs}
\end{frame}

\begin{frame}{What's the Type of \texttt{+}?}
  \input{code/plus6.hs}
\end{frame}

\begin{frame}{Which Function has Type \texttt{a $\rightarrow$ a}?}
  \input{code/id1.hs}
\end{frame}

\begin{frame}{Which Function has Type \texttt{a $\rightarrow$ a}?}
  \input{code/id2.hs}
\end{frame}

\begin{frame}{Which Function has Type \texttt{a $\rightarrow$ a}?}
  \input{code/id3.hs}
\end{frame}

\begin{frame}{Which Function has Type \texttt{(a, b) $\rightarrow$ a}?}
  \pause
  \input{code/fst.hs}
\end{frame}

\begin{frame}{Which Functions have Type \texttt{Num a => (a, a) $\rightarrow$ a}?}
  \pause
  \input{code/pair.hs}
  \pause

  \input{code/pair1.hs}
\end{frame}

\begin{frame}{How About Side Effects?}
  \input{code/io1.hs}
\end{frame}

\begin{frame}{How About Side Effects?}
  \input{code/io2.hs}
\end{frame}

\begin{frame}{How About Side Effects?}
  \small
  \input{code/io3.hs}
\end{frame}

\begin{frame}{Types In a Nutshell}
  \begin{itemize}
    \item seatbelt
    \item safety net
    \item documentation
    \item no mistakenly launching missiles
  \end{itemize}
\end{frame}

\begin{frame}{Idea}
  \quote{Isaac Asimov}{-}{
    The most exciting phrase to hear in science, the one that heralds the most
    discoveries, is not "Eureka!", but "That's funny..."
  }
  \pause
  \pause
  \begin{description}[<+->]
    \item[(jigsaw) puzzle] mix pieces based on boundaries
    \item[programming...] mix functions based on types
  \end{description}
\end{frame}

\begin{frame}{Tools}
  \begin{itemize}[<+->]
    \item \texttt{ghci} - GHC interpreter
    \item \texttt{Hoogle} / \texttt{Hayoo} - search engines
    \item no \texttt{Hing} for now
  \end{itemize}
  \pause
  Let's play
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over a list of arguments
  \end{itemize}
  \input{code/map1.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over a list of arguments
    \item Rename types and look for missing links
  \end{itemize}
  \input{code/map2.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over a list of arguments
  \end{itemize}
  \input{code/map3.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over a list of arguments
  \end{itemize}
  \input{code/map4.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over \textit{nodes in a tree}
  \end{itemize}
  \input{code/map5.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over \textit{nodes in a tree}
  \end{itemize}
  \input{code/map6.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over \textit{nodes in a tree}
  \end{itemize}
  \tiny
  \input{code/map7.hs}
\end{frame}

\begin{frame}{Case Study 1}
  \begin{itemize}
    \item Apply same function over \textit{nodes in a tree}
  \end{itemize}
  \tiny
  \input{code/map8.hs}
\end{frame}

\begin{frame}{Case Study 2}
  \begin{itemize}
    \item Convert between graph representations given the following functions
  \end{itemize}
  \input{code/graph1.hs}
\end{frame}

\begin{frame}{Case Study 2}
  \begin{itemize}
    \item Convert between graph representations given the following functions
  \end{itemize}
  \input{code/graph2.hs}
\end{frame}

\begin{frame}{Magic}
  \quote{-}{-}{Every methodology I've come across has, at its kernel, a very
  small section labelled do ``magic here''.}
  \pause
  \quote{Arthur C. Clarke}{-}{Any sufficiently advanced technology is
  indistinguishable from magic.}
\end{frame}

\begin{frame}{Case Study 3}
  \begin{itemize}[<+->]
    \item Break a text in newlines to create a justified paragraph.
    \item Initial type \texttt{String -> String}
    \item Second try\\ \small{\texttt{String -> [String] -> [[String]] ->
    [String] -> String}}
    \item Strange Loop 2012, Michael Feathers
  \end{itemize}
\end{frame}

\begin{frame}{Case Study 4}
  \begin{itemize}
    \item create a regexp parser
  \end{itemize}
  \pause
  \begin{itemize}
    \item this and above with more details in TMR 22
    \item \url{http://themonadreader.wordpress.com/}
  \end{itemize}
\end{frame}

\begin{frame}{At The End of The Day}
  \begin{itemize}
    \item powerful paradigm
    \item several guarantees
    \begin{itemize}
      \item safety
      \item proofs
      \item compiler alliance
    \end{itemize}
  \end{itemize}
  \pause
  \quote{-}{-}{A mind once stretched by a new idea never regains its original
  dimensions.}
\end{frame}

\begin{frame}{The Other Side of The Coin}
  \begin{itemize}
    \item must take care to design proper types
  \end{itemize}
  \pause
  \quote{Henry Ward Beecher}{-}{It's easier to go down a hill than up it but
  the view is much better at the top.}
\end{frame}

\begin{frame}{Applicability}
  \begin{itemize}[<+->]
    \item not only in Haskell
    \item not only in strongly typed languages (but with some problems)
    \item adabtability to language constraints
  \end{itemize}
\end{frame}

\begin{frame}{Puzzle Driven Development}
  \begin{itemize}[<+->]
    \item already patended :(
    \item 2010
    \item something else: integration branches
  \end{itemize}
\end{frame}

\begin{frame}{Dependent Types}
  \input{code/idris.hs}
\end{frame}

\begin{frame}{Future}
  \quote{http://blog.vivekhaldar.com/post/49821678549/future-programming}{}{
    Imagine a Clippy for programming. What if your IDE went: ``Looks like
    you're trying to write a for loop over this array, but you have an
    off-by-one error. Would you like me to fix it?'' Or: ``Looking at the
    signature of this method, here are the most likely methods you will need
    next to get to the type of the returned value.'' That's your editor
    understanding the semantics of your language and code base at a deep
    level.
    \vskip0.5cm
    Think of it as coding with an entire datacenter behind you to help.
  }
\end{frame}

\end{document}
